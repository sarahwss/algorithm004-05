package leetcode.editor.cn;//ä½ çš„èµ›è½¦èµ·å§‹åœç•™åœ¨ä½ç½® 0ï¼Œé€Ÿåº¦ä¸º +1ï¼Œæ­£è¡Œé©¶åœ¨ä¸€ä¸ªæ— é™é•¿çš„æ•°è½´ä¸Šã€‚ï¼ˆè½¦ä¹Ÿå¯ä»¥å‘è´Ÿæ•°æ–¹å‘è¡Œé©¶ã€‚ï¼‰
//
// ä½ çš„è½¦ä¼šæ ¹æ®ä¸€ç³»åˆ—ç”± Aï¼ˆåŠ é€Ÿï¼‰å’Œ Rï¼ˆå€’è½¦ï¼‰ç»„æˆçš„æŒ‡ä»¤è¿›è¡Œè‡ªåŠ¨é©¾é©¶ ã€‚ 
//
// å½“è½¦å¾—åˆ°æŒ‡ä»¤ "A" æ—¶, å°†ä¼šåšå‡ºä»¥ä¸‹æ“ä½œï¼š position += speed, speed *= 2ã€‚ 
//
// å½“è½¦å¾—åˆ°æŒ‡ä»¤ "R" æ—¶, å°†ä¼šåšå‡ºä»¥ä¸‹æ“ä½œï¼šå¦‚æžœå½“å‰é€Ÿåº¦æ˜¯æ­£æ•°ï¼Œåˆ™å°†è½¦é€Ÿè°ƒæ•´ä¸º speed = -1 ï¼›å¦åˆ™å°†è½¦é€Ÿè°ƒæ•´ä¸º speed = 1ã€‚ (å½“å‰æ‰€
//å¤„ä½ç½®ä¸å˜ã€‚) 
//
// ä¾‹å¦‚ï¼Œå½“å¾—åˆ°ä¸€ç³»åˆ—æŒ‡ä»¤ "AAR" åŽ, ä½ çš„è½¦å°†ä¼šèµ°è¿‡ä½ç½® 0->1->3->3ï¼Œå¹¶ä¸”é€Ÿåº¦å˜åŒ–ä¸º 1->2->4->-1ã€‚ 
//
// çŽ°åœ¨ç»™å®šä¸€ä¸ªç›®æ ‡ä½ç½®ï¼Œè¯·ç»™å‡ºèƒ½å¤Ÿåˆ°è¾¾ç›®æ ‡ä½ç½®çš„æœ€çŸ­æŒ‡ä»¤åˆ—è¡¨çš„é•¿åº¦ã€‚ 
//
// 
//
// 
//ç¤ºä¾‹ 1:
//è¾“å…¥: 
//target = 3
//è¾“å‡º: 2
//è§£é‡Š: 
//æœ€çŸ­æŒ‡ä»¤åˆ—è¡¨ä¸º "AA"
//ä½ç½®å˜åŒ–ä¸º 0->1->3
// 
//
// 
//ç¤ºä¾‹ 2:
//è¾“å…¥: 
//target = 6
//è¾“å‡º: 5
//è§£é‡Š: 
//æœ€çŸ­æŒ‡ä»¤åˆ—è¡¨ä¸º "AAARA"
//ä½ç½®å˜åŒ–ä¸º 0->1->3->7->7->6
// 
//
// è¯´æ˜Ž: 
//
// 
// 1 <= targetï¼ˆç›®æ ‡ä½ç½®ï¼‰ <= 10000ã€‚ 
// 
// Related Topics åŠ¨æ€è§„åˆ’ 
// ðŸ‘ 106 ðŸ‘Ž 0


import java.util.Arrays;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution_818 {

    public int racecar(int target) {
        // targetä½ç½®æŒ‡ä»¤æ¬¡æ•°
        // ä¸ºäº†æ•°ç»„é•¿åº¦æœ€å°‘ä¸º3ï¼Œè€Œ1æœ€å°ä¸º1ï¼Œæ‰€ä»¥è¦åœ¨target+1çš„åŸºç¡€ä¸ŠåŠ ä¸Š2
        int[] dp = new int[target + 3];
        // åˆ«å¿˜äº†åˆå§‹å€¼
        Arrays.fill(dp, Integer.MAX_VALUE);
        // è™½ç„¶æœ‰é€Ÿåº¦ï¼Œè¿˜æ˜¯å¾—æœ‰æŒ‡å®šï¼Œå¦åˆ™ä½ç½®ä¸ä¼šå˜
        dp[0] = 0;
        // target = 1ï¼ŒA
        dp[1] = 1;
        // target = 2, AARA
        dp[2] = 4;
        // éœ€è¦3ä¸ªåˆå§‹å€¼ä¸ºäº†å‡‘å¤Ÿä¸€è½®2^kï¼Œä¾›ä¸‹ä¸€è½®è¿­ä»£ä½¿ç”¨ åªæœ‰2^0ä¸å¤Ÿ
        for (int i = 3; i <= target; i++) {
            // ä¸ºä»€ä¹ˆæ˜¯ (1 << k) - 1ï¼Œå¯ç”»å›¾ï¼Œå‘çŽ°è·¯å¾„æ—¶ç­‰å·®æ•°åˆ—
            // å…ˆç¡®å®šk
            int k = 32 - Integer.numberOfLeadingZeros(i);
            // åˆšå¥½kæ­¥ï¼Œä¸éœ€è¦å¾€å›žç§»
            if (i == (1 << k) - 1) {
                // æ³¨æ„è¿™é‡Œä¸æ˜¯return k, åˆ¤æ–­ä¹Ÿä¸æ˜¯åˆ¤æ–­target
                dp[i] = k;
                continue;
            }
            // ä»Žå°å¤„æŠ˜è¿”å†æŠ˜å›žï¼Œä¹‹æ‰€ä»¥j<k-1å› ä¸ºå†å‡å¾—å¤šå°±å˜æˆ2^k-1çš„èŒƒå›´
            for (int j = 0; j < k - 1; j++) {
                // A(k-1)RA(j)R
                dp[i] = Math.min(dp[i], k - 1 + j + 2 + dp[i - (1 << (k - 1)) + (1 << j)]);
            }
            // å…ˆèµ°åˆ°è¿œä½ç½®ï¼Œå†å¾€å›žè¿”
            // æ³¨æ„è¿™é‡Œä¸æ˜¯targetäº‹i
            if ((1 << k) - 1 - i < i) {
                dp[i] = Math.min(dp[i], k + 1 + dp[(1 << k) - 1 - i]);
            }
        }
        return dp[target];
    }

    public static void main(String[] args) {
        System.out.println(new Solution_818().racecar(8));
    }
}
//leetcode submit region end(Prohibit modification and deletion)
